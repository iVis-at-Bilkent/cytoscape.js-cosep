<!DOCTYPE>

<html>

	<head>
		<title>cytoscape-cosep.js demo</title>

		<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1, maximum-scale=1">

		<!-- Cytoscape extention -->
		<script src="https://unpkg.com/cytoscape/dist/cytoscape.min.js"></script>

		<!-- for testing with local version of cytoscape.js -->
		<!--<script src="../cytoscape.js/build/cytoscape.js"></script>-->

		<!-- Other iVis-at-Bilkent libraries -->
		<script src="https://unpkg.com/layout-base/layout-base.js"></script>
		<script src="https://unpkg.com/cose-base/cose-base.js"></script>



		<script src="cytoscape-cosep.js"></script>

		<style>
			body {
				font-family: helvetica neue, helvetica, liberation sans, arial, sans-serif;
				font-size: 14px;
			}

			#cy {
				position: absolute;
				left: 0;
				top: 0;
				bottom: 0;
				right: 0;
				z-index: 999;
			}

			h1 {
				opacity: 0.5;
				font-size: 1em;
				font-weight: bold;
			}

		</style>

		<script>
			document.addEventListener('DOMContentLoaded', function() {

				var cy = window.cy = cytoscape({
					container: document.getElementById('cy'),

					// demo your layout
					layout: {
						name: 'cosep',
						animate: true,
						refresh:1,
						portsPerSide: 5,
						tile: false,
						portConstraints: function (edge) {
							if (edge.data('id') == 'e0') {
								return [
									{
										endpoint: 'Source',
										portConstraintType: 'Sided',
										portConstraintParameter: [ 'Right' ]
									},
									{
										endpoint: 'Target',
										portConstraintType: 'Sided',
										portConstraintParameter: [ 'Top', 'Bottom' ]
									}
								];
							}
							if (edge.data('id') == 'e3') {
								return [
									{
										endpoint: 'Source',
										portConstraintType: 'Sided',
										portConstraintParameter: [ 'Right' ]
									},
									{
										endpoint: 'Target',
										portConstraintType: 'Sided',
										portConstraintParameter: [ 'Top' ]
									}
								];
							}

							if (edge.data('id') == 'e4') {
								return [
									{
										endpoint: 'Target',
										portConstraintType: 'Free',
										portConstraintParameter: [ 'Left' ]
									}
								];
							}


							return null;
						}

						// some more options here...
					},

					style: [
						{
							selector: 'node',
							style: {
								'shape' : 'rectangle',
								'label' : 'data(id)',
								'text-halign': 'center',
								'text-valign': 'center'
							}
						},

						{
							selector: 'edge',
							style: {
								'curve-style': 'straight'
							}
						}
					],
					elements: [{group: 'nodes', data: {id: 'n0'}},
						{group: 'nodes', data: {id: 'n1'}},
						{group: 'nodes', data: {id: 'n2'}},
						{group: 'nodes', data: {id: 'n3'}},
						{group: 'nodes', data: {id: 'n4'}},
						{group: 'nodes', data: {id: 'n5'}},
						{group: 'nodes', data: {id: 'n10'}},
						{group: 'nodes', data: {id: 'n11', parent: 'n10'}},
						{group: 'nodes', data: {id: 'n12', parent: 'n10'}},
						{group: 'nodes', data: {id: 'n20'}},
						{group: 'nodes', data: {id: 'n21', parent: 'n20'}},
						{group: 'nodes', data: {id: 'n22', parent: 'n20'}},
						{group: 'nodes', data: {id: 'n23', parent: 'n20'}},

						{group: 'edges', data: {id: 'e0', source: 'n1', target: 'n2'}},
						{group: 'edges', data: {id: 'e1', source: 'n2', target: 'n3'}},
						{group: 'edges', data: {id: 'e2', source: 'n3', target: 'n21'}},
						{group: 'edges', data: {id: 'e3', source: 'n1', target: 'n10'}},
						{group: 'edges', data: {id: 'e4', source: 'n4', target: 'n20'}},
						{group: 'edges', data: {id: 'e5', source: 'n21', target: 'n23'}},
						{group: 'edges', data: {id: 'e6', source: 'n0', target: 'n10'}},
						{group: 'edges', data: {id: 'e7', source: 'n0', target: 'n20'}},
						{group: 'edges', data: {id: 'e8', source: 'n2', target: 'n0'}},
						{group: 'edges', data: {id: 'e9', source: 'n5', target: 'n10'}}
					]
				});

			});

		</script>
	</head>

	<body>
		<h1>cytoscape-cosep demo</h1>

		<div id="cy"></div>

	</body>

</html>
